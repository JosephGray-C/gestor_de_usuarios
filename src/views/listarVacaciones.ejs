<%- include('template/header') %>

<% let tienePendientes = false; %>
<% let tieneAprobadas = false; %>
<% let tieneRechazadas = false; %>

<!-- Vacaciones Pendientes -->
<% vacaciones.forEach(vacacion => { %>
  <% if (vacacion.estado == 'Pendiente') { %>
    <% tienePendientes = true; %>
  <% } %>
<% }); %>

<% if (tienePendientes) { %>
  <h1 class="title-sliders">Vacaciones Pendientes</h1>
  <div class="main-container">
    <div class="swiper-container">
      <div class="swiper-wrapper">
        <% vacaciones.forEach(vacacion => { %>
          <% if (vacacion.estado == 'Pendiente') { %>
            <div class="swiper-slide">  
              <div class="form-container-vacacion">
                <div class="tools">
                  <div class="circle">
                    <span class="yellow box"></span>
                  </div>
                </div>
                <p class="title">VACACIÓN</p>
                <div class="input-group field">
                  <label for="empleado">Empleado</label>
                  <p><%= vacacion.empleado %></p>
                </div>
                <div class="flex">
                  <div class="input-group field">
                    <label for="fecha_inicio">Fecha Inicio</label>
                    <p>
                      <%= parseLocalDate(vacacion.fecha_inicio).toLocaleDateString('es-ES', { day: '2-digit', month: 'short', year: 'numeric' }) %>
                    </p>
                  </div>
                  <div class="input-group field">
                    <label for="fecha_fin">Fecha Fin</label>
                    <p>
                      <%= parseLocalDate(vacacion.fecha_fin).toLocaleDateString('es-ES', { day: '2-digit', month: 'short', year: 'numeric' }) %>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          <% } %>
        <% }); %>
      </div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
<% } %>

<!-- Vacaciones Aprobadas -->
<% vacaciones.forEach(vacacion => { %>
  <% if (vacacion.estado == 'Aprobado') { %>
    <% tieneAprobadas = true; %>
  <% } %>
<% }); %>

<% if (tieneAprobadas) { %>
  <h1 class="title-sliders">Vacaciones Aprobadas</h1>
  <div class="main-container">
    <div class="swiper-container">
      <div class="swiper-wrapper">
        <% vacaciones.forEach(vacacion => { %>
          <% if (vacacion.estado == 'Aprobado') { %>
            <div class="swiper-slide">  
              <div class="form-container-vacacion">
                <div class="tools">
                  <div class="circle">
                    <span class="green box"></span>
                  </div>
                </div>
                <p class="title">VACACIÓN</p>
                <div class="input-group field">
                  <label for="empleado">Empleado</label>
                  <p><%= vacacion.empleado %></p>
                </div>
                <div class="flex">
                  <div class="input-group field">
                    <label for="fecha_inicio">Fecha Inicio</label>
                    <p>
                      <%= parseLocalDate(vacacion.fecha_inicio).toLocaleDateString('es-ES', { day: '2-digit', month: 'short', year: 'numeric' }) %>
                    </p>
                  </div>
                  <div class="input-group field">
                    <label for="fecha_fin">Fecha Fin</label>
                    <p>
                      <%= parseLocalDate(vacacion.fecha_fin).toLocaleDateString('es-ES', { day: '2-digit', month: 'short', year: 'numeric' }) %>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          <% } %>
        <% }); %>
      </div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
<% } %>

<!-- Vacaciones Rechazadas -->
<% vacaciones.forEach(vacacion => { %>
  <% if (vacacion.estado == 'Rechazado') { %>
    <% tieneRechazadas = true; %>
  <% } %>
<% }); %>

<% if (tieneRechazadas) { %>
  <h1 class="title-sliders">Vacaciones Rechazadas</h1>
  <div class="main-container">
    <div class="swiper-container">
      <div class="swiper-wrapper">
        <% vacaciones.forEach(vacacion => { %>
          <% if (vacacion.estado == 'Rechazado') { %>
            <div class="swiper-slide">  
              <div class="form-container-vacacion">
                <div class="tools">
                  <div class="circle">
                    <span class="red box"></span>
                  </div>
                </div>
                <p class="title">VACACIÓN</p>
                <div class="input-group field">
                  <label for="empleado">Empleado</label>
                  <p><%= vacacion.empleado %></p>
                </div>
                <div class="flex">
                  <div class="input-group field">
                    <label for="fecha_inicio">Fecha Inicio</label>
                    <p>
                      <%= parseLocalDate(vacacion.fecha_inicio).toLocaleDateString('es-ES', { day: '2-digit', month: 'short', year: 'numeric' }) %>
                    </p>
                  </div>
                  <div class="input-group field">
                    <label for="fecha_fin">Fecha Fin</label>
                    <p>
                      <%= parseLocalDate(vacacion.fecha_fin).toLocaleDateString('es-ES', { day: '2-digit', month: 'short', year: 'numeric' }) %>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          <% } %>
        <% }); %>
      </div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
<% } %>

<!-- Mensaje si no hay vacaciones -->
<% if (!tienePendientes && !tieneAprobadas && !tieneRechazadas) { %>
  <p class="null">No hay vacaciones disponibles.</p>
<% } %>

<%- include('template/footer') %>